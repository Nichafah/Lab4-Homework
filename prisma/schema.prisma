generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}


model Author {
  id        Int     @id @default(autoincrement())
  firstName String
  lastName  String
  affiliation String
  books     Book[]
}

model Book {
  id        Int     @id @default(autoincrement())
  title     String
  isbn      String  @unique
  category  String
  authorId  Int
  author    Author  @relation(fields: [authorId], references: [id])
  borrows   BorrowRecord[]
}

model Member {
  id        Int     @id @default(autoincrement())
  memberCode String @unique
  firstName String
  lastName  String
  phone     String
  borrows   BorrowRecord[]
}

model BorrowRecord {
  id          Int      @id @default(autoincrement())
  bookId      Int
  memberId    Int
  dueDate     DateTime
  returnedAt  DateTime?

  book        Book    @relation(fields: [bookId], references: [id])
  member      Member  @relation(fields: [memberId], references: [id])
}

